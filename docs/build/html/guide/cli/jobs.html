<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Working with notebooks &mdash; omega|ml 1.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Working with the runtime" href="runtime.html" />
    <link rel="prev" title="Working with scripts" href="scripts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> omega|ml
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets/index.html">Working with datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/index.html">Working with models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jobs/index.html">Working with notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusters/index.html">Deploying models and pipelines</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Command-line interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Using the command-line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html">Working with models</a></li>
<li class="toctree-l3"><a class="reference internal" href="datasets.html">Working with datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts.html">Working with scripts</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Working with notebooks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#storing-a-notebook">Storing a notebook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retrieve-a-notebook">Retrieve a notebook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-notebooks">Running notebooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scheduling-notebooks">Scheduling notebooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#checking-the-status-of-notebook-runs">Checking the status of notebook runs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="runtime.html">Working with the runtime</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/index.html">Advanced features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration/index.html">Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devguide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nb/index.html">Tutorial Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moreinfo.html">More information</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">omega|ml</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">User Guide</a> &raquo;</li>
          <li><a href="index.html">Command-line interface</a> &raquo;</li>
      <li>Working with notebooks</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/guide/cli/jobs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="working-with-notebooks">
<h1>Working with notebooks<a class="headerlink" href="#working-with-notebooks" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Jupyter notebooks stored in omegaml are called jobs because the main purpose
of storing notebooks in omegaml is to easily transform notebooks into
remotely executed programs, optionally scheduled to run at a particular time
(e.g. nightly, daily, every fortnight etc.)</p>
</aside>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">help</span> <span class="nb">jobs</span>
Usage:
  om <span class="nb">jobs</span> list <span class="o">[</span>&lt;pattern&gt;<span class="o">]</span> <span class="o">[</span>--raw<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om <span class="nb">jobs</span> put &lt;path&gt; &lt;name&gt; <span class="o">[</span>options<span class="o">]</span>
  om <span class="nb">jobs</span> get &lt;name&gt; &lt;path&gt; <span class="o">[</span>options<span class="o">]</span>
  om <span class="nb">jobs</span> drop &lt;name&gt;
  om <span class="nb">jobs</span> metadata &lt;name&gt; <span class="o">[</span>options<span class="o">]</span>
  om <span class="nb">jobs</span> schedule &lt;name&gt; <span class="o">[</span>show<span class="p">|</span>delete<span class="p">|</span>&lt;interval&gt;<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om <span class="nb">jobs</span> status &lt;name&gt;

Options:
  --cron &lt;spec&gt;       the cron spec, use https://crontab.guru/
  --weekday &lt;wday&gt;    a day number <span class="m">0</span>-6 <span class="o">(</span><span class="nv">0</span><span class="o">=</span>Sunday<span class="o">)</span>
  --monthday &lt;mday&gt;   a day of the month <span class="m">1</span>-31
  --month &lt;month&gt;     a month number <span class="m">1</span>-12
  --at &lt;hh:mm&gt;        the <span class="nb">time</span> <span class="o">(</span>same as --hour hh --minute mm<span class="o">)</span>
  --hour &lt;hour&gt;       the hour <span class="m">0</span>-23
  --minute &lt;minute&gt;   the minute <span class="m">0</span>-59
  --next &lt;n&gt;          show next n triggers according to interval

Description:
    Specify the schedule either as

    * a natural language-like text, with any <span class="nb">time</span> components separated
      by comma

      om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;every 5 minutes, on fridays, in april&quot;</span>
      om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;at 6:00, on fridays&quot;</span>
      om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;at 6:00/10:00, on fridays&quot;</span>
      om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;every 2nd hour, every 15 minutes, weekdays&quot;</span>
</pre></div>
</div>
<section id="storing-a-notebook">
<h2>Storing a notebook<a class="headerlink" href="#storing-a-notebook" title="Permalink to this headline">¶</a></h2>
<p>A notebook in the <code class="code docutils literal notranslate"><span class="pre">.ipynb</span></code> format may be stored as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">jobs</span> put /path/to/mynotebook.ipynb mynotebook
</pre></div>
</div>
</section>
<section id="retrieve-a-notebook">
<h2>Retrieve a notebook<a class="headerlink" href="#retrieve-a-notebook" title="Permalink to this headline">¶</a></h2>
<p>Retrieve a notebook to a local file as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">jobs</span> get mynotebook /path/to/mynotebook.ipynb
</pre></div>
</div>
</section>
<section id="running-notebooks">
<h2>Running notebooks<a class="headerlink" href="#running-notebooks" title="Permalink to this headline">¶</a></h2>
<p>Run notebooks as jobs on the omega|ml runtime:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om runtime job mynotebook
&lt;Metadata: Metadata<span class="o">(</span><span class="nv">name</span><span class="o">=</span>results/main_2021-02-22 <span class="m">12</span>:52:45.665179.ipynb,bucket<span class="o">=</span>omegaml,prefix<span class="o">=</span>jobs/,kind<span class="o">=</span>script.ipynb,created<span class="o">=</span><span class="m">2021</span>-02-22 <span class="m">12</span>:52:47.725302<span class="o">)</span>&gt;
</pre></div>
</div>
<p>This runs the notebook and stores the results in the <code class="code docutils literal notranslate"><span class="pre">jobs/results</span></code> folder.
The execution and its result status are also recorded in the job’s Metadata entry:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>$ om jobs metadata mynotebook | jq
{
    &quot;name&quot;: &quot;mynotebook.ipynb&quot;,
    &quot;bucket&quot;: &quot;omegaml&quot;,
    &quot;prefix&quot;: &quot;jobs/&quot;,
    &quot;kind&quot;: &quot;script.ipynb&quot;,
    &quot;kind_meta&quot;: {},
    &quot;attributes&quot;: {
      &quot;job_results&quot;: [
        &quot;results/main_2021-02-22 12:52:45.665179.ipynb&quot;
      ],
      &quot;job_runs&quot;: [
        {
          &quot;status&quot;: &quot;OK&quot;,
          &quot;ts&quot;: {
            &quot;$date&quot;: 1613998365665
          },
          &quot;message&quot;: &quot;&quot;,
          &quot;results&quot;: &quot;results/main_2021-02-22 12:52:45.665179.ipynb&quot;
        }
      ],
      &quot;state&quot;: &quot;SUCCESS&quot;,
      &quot;task_id&quot;: &quot;881100ed-161c-4c18-ad8e-cc7db9102788&quot;
    },
  }
</pre></div>
</div>
</section>
<section id="scheduling-notebooks">
<h2>Scheduling notebooks<a class="headerlink" href="#scheduling-notebooks" title="Permalink to this headline">¶</a></h2>
<p>Notebooks may be scheduled to run at particular times using a natural language-like
specification in the format <code class="code docutils literal notranslate"><span class="pre">[timepart,</span> <span class="pre">...]</span></code> where timepart is either</p>
<ul class="simple">
<li><p>an interval like “every 5 minutes”</p></li>
<li><p>a time like “at 6:00”</p></li>
<li><p>a day specifier like “weekdays” or “on fridays”</p></li>
<li><p>a month specifier like “in april”</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;every 5 minutes, on fridays, in april&quot;</span>
$ om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;at 6:00, on fridays&quot;</span>
$ om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;at 6:00/10:00, on fridays&quot;</span>
$ om <span class="nb">jobs</span> schedule myjob <span class="s2">&quot;every 2nd hour, every 15 minutes, weekdays&quot;</span>
</pre></div>
</div>
<p>The interval may also be specified as a <a class="reference external" href="http://www.cronmaker.com/?0">cron schedule</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">jobs</span> schedule myjob --cron <span class="s2">&quot;0 0 12 ? * MON *&quot;</span>
</pre></div>
</div>
<p>The interval may also be specified using several options</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">jobs</span> schedule myjob --hour <span class="m">23</span> --weekday <span class="m">6</span>
</pre></div>
</div>
<p>The results of the scheduled jobs will be stored the same way as if the job
is run directly.</p>
</section>
<section id="checking-the-status-of-notebook-runs">
<h2>Checking the status of notebook runs<a class="headerlink" href="#checking-the-status-of-notebook-runs" title="Permalink to this headline">¶</a></h2>
<p>The status of a notebook run can be checked as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">jobs</span> status main
Runs:
  <span class="m">2021</span>-02-04 <span class="m">20</span>:19:08.445000 OK
  <span class="m">2021</span>-02-04 <span class="m">20</span>:19:10.398000 OK
  <span class="m">2021</span>-02-22 <span class="m">12</span>:52:45.665000 OK
Next scheduled runs:
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scripts.html" class="btn btn-neutral float-left" title="Working with scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="runtime.html" class="btn btn-neutral float-right" title="Working with the runtime" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020 (c) omegaml.io by one2seven GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>