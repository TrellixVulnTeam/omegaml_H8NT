<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Working with the cloud &mdash; omega|ml 1.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> omega|ml
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devguide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nb/index.html">Tutorial Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moreinfo.html">More information</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">omega|ml</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Working with the cloud</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/guide/cli/cloud.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="working-with-the-cloud">
<h1>Working with the cloud<a class="headerlink" href="#working-with-the-cloud" title="Permalink to this headline">¶</a></h1>
<p><em>Enterprise version</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om <span class="nb">help</span> cloud

Usage:
  om cloud login <span class="o">[</span>&lt;userid&gt;<span class="o">]</span> <span class="o">[</span>&lt;apikey&gt;<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om cloud config <span class="o">[</span>show<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om cloud <span class="o">(</span>add<span class="p">|</span>update<span class="p">|</span>remove<span class="o">)</span> &lt;kind&gt; <span class="o">[</span>--specs &lt;specs&gt;<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om cloud status <span class="o">[</span>runtime<span class="p">|</span>pods<span class="p">|</span>nodes<span class="p">|</span>storage<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om cloud log &lt;pod&gt; <span class="o">[</span>--since &lt;time&gt;<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>
  om cloud metrics <span class="o">[</span>&lt;metric_name&gt;<span class="o">]</span> <span class="o">[</span>--since &lt;time&gt;<span class="o">]</span> <span class="o">[</span>--start &lt;start&gt;<span class="o">]</span> <span class="o">[</span>--end &lt;end&gt;<span class="o">]</span> <span class="o">[</span>--step &lt;step&gt;<span class="o">]</span> <span class="o">[</span>--plot<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span>

Options:
  --userid<span class="o">=</span>USERID   the userid at hub.omegaml.io <span class="o">(</span>see account profile<span class="o">)</span>
  --apikey<span class="o">=</span>APIKEY   the apikey at hub.omegaml.io <span class="o">(</span>see account profile<span class="o">)</span>
  --apiurl<span class="o">=</span>URL      the cloud URL <span class="o">[</span>default: https://hub.omegaml.io<span class="o">]</span>
  --count<span class="o">=</span>NUMBER    how many instances to <span class="nb">set</span> up <span class="o">[</span>default: <span class="m">1</span><span class="o">]</span>
  --node-type<span class="o">=</span>TYPE  the <span class="nb">type</span> of node <span class="o">[</span>default: small<span class="o">]</span>
  --specs<span class="o">=</span>SPECS     the service specifications as <span class="s2">&quot;key=value[,...]&quot;</span>
  --since<span class="o">=</span>TIME      recent log time, defaults to 5m <span class="o">(</span><span class="m">5</span> minutes<span class="o">)</span>
  --start<span class="o">=</span>DATETIME  start datetime of range query
  --end<span class="o">=</span>DATETIME    end datetime of range query
  --step<span class="o">=</span>UNIT       step <span class="k">in</span> seconds or duration unit <span class="o">(</span><span class="nv">s</span><span class="o">=</span>seconds, <span class="nv">m</span><span class="o">=</span>minutes<span class="o">)</span>
  --plot            <span class="k">if</span> specified use plotext library to plot <span class="o">(</span>preliminary<span class="o">)</span>

Description:
  om cloud is available <span class="k">for</span> the omega<span class="p">|</span>ml managed service at https://hub.omegaml.io

  Logging <span class="k">in</span>
  ----------

  $ om cloud login &lt;userid&gt; &lt;apikey&gt;

  Showing the configuration
  -------------------------

  $ om cloud config

  Building a cluster
  ------------------

  Set up a cluster

  $ om cloud add nodepool --specs <span class="s2">&quot;node-type=&lt;node-type&gt;,role=worker,size=1&quot;</span>
  $ om cloud add runtime --specs <span class="s2">&quot;role=worker,label=worker,size=1&quot;</span>

  Switch nodes on and off

  $ om cloud update worker --specs <span class="s2">&quot;node-name=&lt;name&gt;,scale=0&quot;</span> <span class="c1"># off</span>
  $ om cloud update worker --specs <span class="s2">&quot;node-name=&lt;name&gt;,scale=1&quot;</span> <span class="c1"># on</span>

  Using Metrics
  -------------

  The following metrics are available

  * node-cpu-usage      node cpu usage <span class="k">in</span> percent
  * node-memory-usage   node memory usage <span class="k">in</span> percent
  * node-disk-uage      node disk usage <span class="k">in</span> percent
  * pod-cpu-usage       pod cpu usage <span class="k">in</span> percent
  * pod-memory-usage    pod memory usage <span class="k">in</span> bytes

  Get the specific metrics as follows, e.g.

  $ om cloud metrics node-cpu-usage
  $ om cloud metrics pod-cpu-usage --since 30m
  $ om cloud metrics pod-memory-usage --start 20dec2020T0100 --end20dec2020T0800
</pre></div>
</div>
<section id="logging-into-the-cloud">
<h2>Logging into the cloud<a class="headerlink" href="#logging-into-the-cloud" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om cloud login &lt;USERID&gt; &lt;APIKEY&gt;
Config is <span class="k">in</span> config.yml
</pre></div>
</div>
<p>The configuration is stored in <code class="code docutils literal notranslate"><span class="pre">config.yml</span></code> as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span>OMEGA_APIKEY: ****
OMEGA_RESTAPI_URL: https://hub.omegaml.io
OMEGA_USERID: demo
</pre></div>
</div>
</section>
<section id="viewing-the-cloud-status">
<h2>Viewing the cloud status<a class="headerlink" href="#viewing-the-cloud-status" title="Permalink to this headline">¶</a></h2>
<p>View important aspects of your omega|ml cloud environment.</p>
<section id="runtime">
<h3>Runtime<a class="headerlink" href="#runtime" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om cloud status runtime
worker                         tasks  labels
---------------------------  -------  ---------------
celery@worker-worker-omdemo        <span class="m">0</span>  celery,default
</pre></div>
</div>
</section>
<section id="pods">
<h3>Pods<a class="headerlink" href="#pods" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om cloud status pods
 name                                             namespace    status    nodeName            nodeSelector
 -----------------------------------------------  -----------  --------  ------------------  ---------------------------
 worker-omdemo-worker-worker-omdemo-6f7c96f7c9    demo         Running   om-hub-demo-4c8gb1  omegaml.io/role<span class="o">=</span>demo-worker
</pre></div>
</div>
</section>
<section id="nodes">
<h3>Nodes<a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om cloud status nodes
name                    status    role               cpu  memory    disk
----------------------  --------  ---------------  -----  --------  -------
om-hub-demo-4c8gb1      running   demo-worker          <span class="m">4</span>  7979Mi    47931Mi
</pre></div>
</div>
</section>
<section id="storage">
<h3>Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ om cloud status storage
kind        size  status
-------  -------  --------
mongodb  <span class="m">2</span>.44133  OK
</pre></div>
</div>
</section>
</section>
<section id="access-cloud-logs">
<h2>Access cloud logs<a class="headerlink" href="#access-cloud-logs" title="Permalink to this headline">¶</a></h2>
<p>Access the log files of your cloud environment’s pods. A pod is a named started
process. Query the name of the available pods using <code class="code docutils literal notranslate"><span class="pre">om</span> <span class="pre">cloud</span> <span class="pre">status</span> <span class="pre">pods</span></code>,
then access the log as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020 (c) omegaml.io by one2seven GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>