What you need
-------------

MySql
RabbitMq
MongoDB

To use behave
https://sites.google.com/a/chromium.org/chromedriver/downloads

Setup
-----

1. Install all the software required

   $ conda install --file conda-requirements.txt
   $ pip insatll --file pip-requirements.txt
   $ pip install --file requirements.dev

Configure jupyter hub user. This must match the OMEGA_JYHUB_USER and OMEGA_JYHUB_APIKEY env variables
on web and omjobs.

    $ manage.py omsetupuser --username jyadmin --apikey f55750fff7d9ae6c20d5f46a41933f09ba5812a4 --staff

Execute locally
---------------

Start using honcho::

    $ PORT=8000 honcho start web notebook worker

* PORT=8000 sets the web apps server in conf_gunicorn

Test locally
------------

Use behave

    $ OMEGA_URL=http://localhost:8000 behave -D BEHAVE_DEBUG_ON_ERROR omegaee/features


Local Kubernetes Deployment
---------------------------

1. install microk8s
2. enable the private docker repo:

    # see https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-secret-in-the-cluster-that-holds-your-authorization-token
    $ kubectl create secret docker-registry regcred --docker-server=<your-registry-server> --docker-username=<your-name> --docker-password=<your-pword> --docker-email=<your-email>

