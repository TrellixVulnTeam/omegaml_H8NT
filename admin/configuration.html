

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration &mdash; omega|ml 1.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="omega|ml 1.1 documentation" href="../index.html"/>
        <link rel="up" title="Administration" href="index.html"/>
        <link rel="next" title="Using omega|ml on private Spark Clusters" href="spark.html"/>
        <link rel="prev" title="Getting Started with omega|ml" href="kickstart.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> omega|ml
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kickstart.html">Getting Started with omega|ml</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-hooks">Configuration hooks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-file-home-omegaml-config-yml">configuration file (<code class="code docutils literal notranslate"><span class="pre">$HOME/.omegaml/config.yml</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-environment-variables">system environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#in-code-update">in-code update</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#basic-configuration">Basic configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storage-configuration">Storage configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#celery-cluster-configuration">Celery Cluster configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#client-side-configuration-constance">Client-side configuration (constance)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spark.html">Using omega|ml on private Spark Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="putget.html">Interface with omega|ml to get/put models and objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="design.html">Design</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devguide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nb/index.html">Tutorial Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../screenshots.html">Screenshots</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">omega|ml</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Administration</a> &raquo;</li>
        
      <li>Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/admin/configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="configuration">
<h1><a class="toc-backref" href="#id1">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#configuration" id="id1">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#configuration-hooks" id="id2">Configuration hooks</a></p>
<ul>
<li><p><a class="reference internal" href="#configuration-file-home-omegaml-config-yml" id="id3">configuration file (<code class="code docutils literal notranslate"><span class="pre">$HOME/.omegaml/config.yml</span></code>)</a></p></li>
<li><p><a class="reference internal" href="#system-environment-variables" id="id4">system environment variables</a></p></li>
<li><p><a class="reference internal" href="#in-code-update" id="id5">in-code update</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#basic-configuration" id="id6">Basic configuration</a></p></li>
<li><p><a class="reference internal" href="#storage-configuration" id="id7">Storage configuration</a></p></li>
<li><p><a class="reference internal" href="#celery-cluster-configuration" id="id8">Celery Cluster configuration</a></p></li>
<li><p><a class="reference internal" href="#client-side-configuration-constance" id="id9">Client-side configuration (constance)</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="configuration-hooks">
<h2><a class="toc-backref" href="#id2">Configuration hooks</a><a class="headerlink" href="#configuration-hooks" title="Permalink to this headline">¶</a></h2>
<p>omega|ml is configured by constants defined in the <code class="code docutils literal notranslate"><span class="pre">omegaml.defaults</span></code> module.
Since this module is usually not directly changeable by the user or
administrator, the following hooks are provided:</p>
<div class="section" id="configuration-file-home-omegaml-config-yml">
<h3><a class="toc-backref" href="#id3">configuration file (<code class="code docutils literal notranslate"><span class="pre">$HOME/.omegaml/config.yml</span></code>)</a><a class="headerlink" href="#configuration-file-home-omegaml-config-yml" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The configuration file in Yaml format is read automatically on omega|ml
startup, if available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>Enterprise Edition</cite>
A user-specific configuration file can be obtained by
any authorized user by running the <code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">omegacli</span> <span class="pre">init</span></code> command.
To override defaults, specify the corresponding variable in Yaml format.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="system-environment-variables">
<h3><a class="toc-backref" href="#id4">system environment variables</a><a class="headerlink" href="#system-environment-variables" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>To change a particular default, set the environment variable of the same
name as the respective configuration parameter. As an example, to change
the <code class="code docutils literal notranslate"><span class="pre">OMEGA_MONGO_URL</span></code> parameter, set the <code class="code docutils literal notranslate"><span class="pre">OMEGA_MONGO_URL</span></code>
environment variable. Note to change an entry in <code class="code docutils literal notranslate"><span class="pre">OMEGA_CELERY_CONFIG</span></code>,
add the <code class="code docutils literal notranslate"><span class="pre">OMEGA_CELERY_</span></code> prefix to the environment variable name. As
an example, to change <code class="code docutils literal notranslate"><span class="pre">OMEGA_CELERY[BROKER_URL]</span></code> use the env var
<code class="code docutils literal notranslate"><span class="pre">OMEGA_CELERY_BROKER_URL</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="in-code-update">
<h3><a class="toc-backref" href="#id5">in-code update</a><a class="headerlink" href="#in-code-update" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>If you integrate omega|ml into your application, the
<code class="code docutils literal notranslate"><span class="pre">omegaml.defaults.update_from_obj</span></code> provides a direct way to update
the defaults from any object. The object needs to support <code class="code docutils literal notranslate"><span class="pre">getattr</span></code>
on the corresponding defaults parameter.</p>
</div></blockquote>
<p>The hooks are applied in the above order, that is the defaults are overriden
by configuration file, then operating system environment variables, then
constance parameters and finally your own code. Note that parameter values
specified in constance cannote be overridden by our own code except by changing
the value in the constance Django table directly.</p>
</div>
</div>
<div class="section" id="basic-configuration">
<h2><a class="toc-backref" href="#id6">Basic configuration</a><a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="omegaml.defaults.OMEGA_TMP">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_TMP</code><a class="headerlink" href="#omegaml.defaults.OMEGA_TMP" title="Permalink to this definition">¶</a></dt>
<dd><p>the temp directory used by omegaml processes</p>
<p>Defaults to <code class="code docutils literal notranslate"><span class="pre">/tmp</span></code></p>
</dd></dl>

<dl class="data">
<dt id="omegaml.defaults.OMEGA_MONGO_URL">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_MONGO_URL</code><a class="headerlink" href="#omegaml.defaults.OMEGA_MONGO_URL" title="Permalink to this definition">¶</a></dt>
<dd><p>the fully qualified mongodb database URL, including the database name</p>
<p>Format <code class="code docutils literal notranslate"><span class="pre">mongodb://user:password&#64;host:port/database</span></code></p>
</dd></dl>

<dl class="data">
<dt id="omegaml.defaults.OMEGA_MONGO_COLLECTION">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_MONGO_COLLECTION</code><em class="property"> = 'omegaml'</em><a class="headerlink" href="#omegaml.defaults.OMEGA_MONGO_COLLECTION" title="Permalink to this definition">¶</a></dt>
<dd><p>the collection name in the mongodb used by omegaml storage</p>
</dd></dl>

</div>
<div class="section" id="storage-configuration">
<h2><a class="toc-backref" href="#id7">Storage configuration</a><a class="headerlink" href="#storage-configuration" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="omegaml.defaults.OMEGA_STORE_BACKENDS">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_STORE_BACKENDS</code><em class="property"> = {'ndarray.bin': 'omegaml.backends.npndarray.NumpyNDArrayBackend', 'pandas.csv': 'omegaml.backends.externaldata.PandasExternalData', 'pandas.rawdict': 'omegaml.backends.rawdict.PandasRawDictBackend', 'pipsrc.package': 'omegaml.backends.package.PythonPipSourcedPackageData', 'python.file': 'omegaml.backends.rawfiles.PythonRawFileBackend', 'python.package': 'omegaml.backends.package.PythonPackageData', 'sklearn.joblib': 'omegaml.backends.scikitlearn.ScikitLearnBackend', 'sqlalchemy.conx': 'omegaml.backends.sqlalchemy.SQLAlchemyBackend', 'virtualobj.dill': 'omegaml.backends.virtualobj.VirtualObjectBackend'}</em><a class="headerlink" href="#omegaml.defaults.OMEGA_STORE_BACKENDS" title="Permalink to this definition">¶</a></dt>
<dd><p>storage backends</p>
<p>Dictionary of pairs <code class="code docutils literal notranslate"><span class="pre">{</span> <span class="pre">'kind':</span> <span class="pre">class</span> <span class="pre">}</span></code>, where
<em>kind</em> is the Metadata.kind of the stored object, and
class is the python loadable name of the class that implements
handling of this kind. The storage backends listed in this variable are
automatically loaded.</p>
</dd></dl>

<dl class="data">
<dt id="omegaml.defaults.OMEGA_STORE_MIXINS">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_STORE_MIXINS</code><em class="property"> = ['omegaml.mixins.store.ProjectedMixin', 'omegaml.mixins.store.LazyGetMixin', 'omegaml.mixins.store.virtualobj.VirtualObjectMixin', 'omegaml.mixins.store.package.PythonPackageMixin', 'omegaml.mixins.store.promotion.PromotionMixin', 'omegaml.mixins.mdf.iotools.IOToolsStoreMixin', 'omegaml.mixins.store.modelversion.ModelVersionMixin']</em><a class="headerlink" href="#omegaml.defaults.OMEGA_STORE_MIXINS" title="Permalink to this definition">¶</a></dt>
<dd><p>storage mixins</p>
<p>List of storage mixin classes. The mixins listed here are automatically
applied to each <code class="code docutils literal notranslate"><span class="pre">OmegaStore</span></code> instance.</p>
</dd></dl>

</div>
<div class="section" id="celery-cluster-configuration">
<h2><a class="toc-backref" href="#id8">Celery Cluster configuration</a><a class="headerlink" href="#celery-cluster-configuration" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="omegaml.defaults.OMEGA_BROKER">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_BROKER</code><em class="property"> = 'amqp://admin:foobar&#64;localhost:5672//'</em><a class="headerlink" href="#omegaml.defaults.OMEGA_BROKER" title="Permalink to this definition">¶</a></dt>
<dd><p>the celery broker name or URL</p>
</dd></dl>

<dl class="data">
<dt id="omegaml.defaults.OMEGA_RESULT_BACKEND">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_RESULT_BACKEND</code><em class="property"> = 'amqp'</em><a class="headerlink" href="#omegaml.defaults.OMEGA_RESULT_BACKEND" title="Permalink to this definition">¶</a></dt>
<dd><p>the celery backend name or URL</p>
</dd></dl>

<dl class="data">
<dt id="omegaml.defaults.OMEGA_CELERY_CONFIG">
<code class="sig-prename descclassname">omegaml.defaults.</code><code class="sig-name descname">OMEGA_CELERY_CONFIG</code><em class="property"> = {'BROKER_HEARTBEAT': 0, 'BROKER_URL': 'amqp://admin:foobar&#64;localhost:5672//', 'BROKER_USE_SSL': False, 'CELERYBEAT_SCHEDULE': {'execute_scripts': {'schedule': 60, 'task': 'omegaml.notebook.tasks.execute_scripts'}}, 'CELERY_ACCEPT_CONTENT': ['pickle', 'json'], 'CELERY_ALWAYS_EAGER': False, 'CELERY_DEFAULT_QUEUE': 'default', 'CELERY_RESULT_BACKEND': 'amqp', 'CELERY_RESULT_SERIALIZER': 'pickle', 'CELERY_TASK_RESULT_EXPIRES': 3600, 'CELERY_TASK_SERIALIZER': 'pickle'}</em><a class="headerlink" href="#omegaml.defaults.OMEGA_CELERY_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>the celery configurations</p>
<p>This is used by omemgal to configure the celery application. Note
that the configuration must be the same for both client and cluster
worker.</p>
</dd></dl>

</div>
<div class="section" id="client-side-configuration-constance">
<h2><a class="toc-backref" href="#id9">Client-side configuration (constance)</a><a class="headerlink" href="#client-side-configuration-constance" title="Permalink to this headline">¶</a></h2>
<p>These parameters are in the admin UI at
<a class="reference external" href="http://localhost:5000/admin/constance/config">http://localhost:5000/admin/constance/config</a>:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">BROKER_URL</span></code> - this is the rabbitmq broker used by the Celery cluster.
Set as <code class="code docutils literal notranslate"><span class="pre">ampq://public-omegaml-hostname:port/&lt;vhost&gt;/</span></code>.
Set vhost depending on your rabbitmq configuration. By default the vhost
is an empty string</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">MONGO_HOST</span></code> - set as <code class="code docutils literal notranslate"><span class="pre">public-mongodb-hostname:port</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">CELERY_ALWAYS_EAGER</span></code> - if this <code class="code docutils literal notranslate"><span class="pre">True</span></code>, all calls to the
runtime are in fact executed locally on the calling machine. Note this
also means that the REST API will not submit any tasks to the cluster.</p></li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spark.html" class="btn btn-neutral float-right" title="Using omega|ml on private Spark Clusters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kickstart.html" class="btn btn-neutral" title="Getting Started with omega|ml" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 (c) omegaml.io by one2seven GmbH.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>