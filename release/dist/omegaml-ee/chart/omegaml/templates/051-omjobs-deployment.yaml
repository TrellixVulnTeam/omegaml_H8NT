apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  annotations:
    kompose.cmd: kompose convert
    kompose.version: 1.16.0 (0c01309)
  creationTimestamp: null
  labels:
    io.kompose.service: omjobs
  name: omjobs

spec:
  replicas: 1
  strategy: {}
  template:
    metadata:
      creationTimestamp: null
      labels:
        io.kompose.service: omjobs
    spec:
{{- if and .Values.dockerRegistry.user (.Values.dockerRegistry.pass) }}
      imagePullSecrets:
      - name: {{ .Values.dockerRegistry.name }}
{{ end }}
      serviceAccountName: jupyterhub-{{ .Release.Name }}
      containers:
      - args:
        - scripts/omegajobs.sh
        envFrom:
         - configMapRef:
              name: omegaml-jobs
        image: {{ .Values.image.name }}:{{ .Values.image.tag }}
        imagePullPolicy: {{ .Values.image.pullPolicy }}
        name: omjobs
        ports:
         - containerPort: 5000
         - containerPort: 8888
         - containerPort: 8081
        resources: {}
        workingDir: /app
      hostname: omjobs
      restartPolicy: Always
status: {}
